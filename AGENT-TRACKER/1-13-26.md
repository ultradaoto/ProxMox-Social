# Agenda - January 13, 2026

## Overview
Working session agenda for the social media automation system. Primary focus: improving vision model state detection and handling empty queue scenarios.

---

## ‚úÖ Completed Today

### Ubuntu Brain Controller Fixes
Major update to `Ubu-Cont/src/` components:

**1. fetcher.py - Platform Support Expanded**
- [x] Added Instagram support (`Platform.INSTAGRAM`)
- [x] Added Facebook support (`Platform.FACEBOOK`)
- [x] Added Twitter/LinkedIn placeholders for future
- [x] Smart platform string parsing: `instagram_vagus` ‚Üí `instagram`, `facebook_personal` ‚Üí `facebook`

**2. reporter.py - API Payload Format Fixed**
- [x] Fixed schema error: "Missing id" 
- [x] Old format (wrong): `{"status": "failed", "timestamp": "...", "processor": "ubuntu-brain"}`
- [x] New format (correct): `{"id": "post-uuid", "error": "...", "retry": true}`
- [x] Success endpoint fixed: `{"id": "post-uuid", "platform_post_id": "url..."}`
- [x] Added emoji logging: ‚è≥ PROCESSING, üì§ POSTING, ‚úì SUCCESS, ‚úó FAILURE

**3. orchestrator.py - Instagram Workflow Added**
- [x] Imported `InstagramWorkflow`
- [x] Initialized Instagram workflow in `_initialize_workflows()`
- [x] 15-step OSP color-coded workflow ready to execute
- [x] Added debug logging for workflow selection diagnostics

**4. cleanup_cache.py - New Utility Created**
- [x] Clears Python `__pycache__` files before restart
- [x] Run with: `python3 ~/ProxMox/Ubu-Cont/cleanup_cache.py`

### Restart Commands
```bash
# Clean cache first
cd ~/ProxMox/Ubu-Cont
python3 cleanup_cache.py

# Restart service
sudo systemctl restart ubuntu-brain
# OR for PM2:
pm2 restart ubuntu-brain

# Watch logs
pm2 logs ubuntu-brain --lines 50
```

---

## üî≤ Remaining Priority Tasks

### 1. Vision Model State Detection
**Problem:** The vision model needs to recognize when there are no posts available in the queue before attempting any posting actions.

**Indicators to detect:**
- Large "X" icon on the right side of the interface
- "No posts available" text/messaging
- Empty queue state in the dashboard

**Action items:**
- [ ] Train/prompt the vision model to identify the "no posts available" visual state
- [ ] Add conditional logic: if empty state detected ‚Üí skip posting workflow entirely
- [ ] Log when empty state is encountered for debugging

### 2. Posting Workflow Guard Rails
**Context:** ~10 posts per day across platforms (Skool, Instagram, Facebook, TikTok)

- [ ] Implement pre-check before each posting attempt
- [ ] If queue empty ‚Üí wait/sleep until next scheduled check
- [ ] Avoid wasted API calls or automation cycles when nothing to post

### 3. Queue State Synchronization
- [x] ~~Ensure Ubuntu controller accurately reflects what's in the posting queue~~ (fixed with reporter.py update)
- [x] ~~Verify database IDs match between social dashboard and Windows fetcher~~ (id field now included)
- [ ] Add visual confirmation step: screenshot ‚Üí vision analysis ‚Üí confirm post exists before acting

---

## System Components Status

| Component | Location | Status |
|-----------|----------|--------|
| Fetcher | Ubu-Cont/src/fetcher.py | ‚úÖ Updated - Instagram/Facebook support |
| Reporter | Ubu-Cont/src/reporter.py | ‚úÖ Fixed - Correct API payload format |
| Orchestrator | Ubu-Cont/src/orchestrator.py | ‚úÖ Updated - Instagram workflow active |
| Vision Agent | Ubuntu VM | üî≤ Needs "empty queue" detection |
| Social Dashboard | social.sterlingcooley.com | ‚úÖ API working correctly |
| Windows Fetcher | Windows 10 VM | üî≤ Verify handles empty response |
| OSP System | In development | üî≤ Consider adding "idle" workflow state |

---

## Questions to Resolve
- What exact visual cues indicate "no posts available"? (screenshot needed)
- Should the system poll periodically when empty, or wait for webhook/notification?
- How to handle partial failures (some platforms have posts, others don't)?

---

## Notes
*Add additional ideas here as they come up*

- Instagram accounts supported: `instagram_vagus`, `instagram_ultra`, `instagram_personal`
- Facebook ready for workflow implementation when needed
- 

---

## End of Day Checklist
- [ ] Vision model correctly identifies empty state
- [ ] No wasted posting attempts when queue is empty
- [x] ~~Ubuntu brain reports correct payload format with id field~~
- [x] ~~Instagram workflow initialized and ready~~
- [ ] System handles ~10 posts/day workflow smoothly
- [ ] Document any new edge cases discovered